<div class="container mt-4">
  <!-- Loading State -->
  <div *ngIf="loading" class="alert alert-info">
    <h4>Loading quiz...</h4>
    <p>Please wait while we load the quiz.</p>
  </div>

  <!-- Error State -->
  <div *ngIf="!loading && error" class="alert alert-danger">
    <h4>Error Loading Quiz</h4>
    <p>{{ error }}</p>
    <p><small>Check the browser console for more details.</small></p>
    <a routerLink="/quizzes" class="btn btn-primary">Back to Quizzes</a>
  </div>

  <!-- Quiz Not Found State -->
  <div *ngIf="!loading && !error && !quiz" class="alert alert-danger">
    <h4>Quiz not found</h4>
    <p>The quiz you're looking for doesn't exist or has been removed.</p>
    <a routerLink="/quizzes" class="btn btn-primary">Back to Quizzes</a>
  </div>

  <!-- Quiz Content -->
  <div *ngIf="!loading && !error && quiz">
    <div class="card">
      <div class="card-header">
        <h2>{{ quiz.title }}</h2>
      </div>
      <div class="card-body">
        <form [formGroup]="quizForm" (ngSubmit)="submitQuiz()">
          <div formArrayName="answers">
            <div *ngFor="let question of quiz?.questions; let i = index" class="mb-4">
              <h4>{{ i + 1 }}. {{ question.text }}</h4>

              <!-- MCQ -->
              <div *ngIf="question.type === 'MCQ'" class="ms-3">
                <div *ngFor="let option of question.options; let j = index" class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    [formControl]="getAnswerControl(i)"
                    [value]="j"
                    [name]="'question-' + i"
                    [id]="'q' + i + 'o' + j"
                  />
                  <label class="form-check-label" [for]="'q' + i + 'o' + j">
                    {{ option.text }}
                  </label>
                </div>
              </div>

              <!-- True/False -->
              <div *ngIf="question.type === 'TRUE_FALSE'" class="ms-3">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    [formControl]="getAnswerControl(i)"
                    [value]="'true'"
                    [name]="'question-' + i"
                    [id]="'q' + i + 'true'"
                  />
                  <label class="form-check-label" [for]="'q' + i + 'true'">True</label>
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    [formControl]="getAnswerControl(i)"
                    [value]="'false'"
                    [name]="'question-' + i"
                    [id]="'q' + i + 'false'"
                  />
                  <label class="form-check-label" [for]="'q' + i + 'false'">False</label>
                </div>
              </div>

              <!-- Text -->
              <div *ngIf="question.type === 'TEXT'" class="ms-3">
                <input
                  type="text"
                  class="form-control"
                  [formControl]="getAnswerControl(i)"
                  placeholder="Your answer"
                />
              </div>
            </div>
          </div>

          <button type="submit" class="btn btn-primary">Submit Quiz</button>
        </form>
      </div>
    </div>
  </div>
</div>
